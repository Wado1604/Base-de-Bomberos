{% extends "base.html" %}
{% block content %}
<style>
  /* Match the bomberos page look */
  .gestion-body {
    font-family: Arial, sans-serif;
    background: linear-gradient(135deg, #ff0000, #ff8c00, #ffff00);
    color: #fff;
    min-height: 100vh;
    padding: 20px;
  }
  .gestion-contenedor {
    background-color: rgba(255,255,255,0.9);
    border-radius: 12px;
    box-shadow: 0 4px 20px rgba(0,0,0,0.3);
    padding: 20px 30px;
    color: #000;
  }
</style>

<div class="gestion-body">
  <div class="gestion-contenedor container mt-4">
  <h2>Gestión de Usuarios</h2>
  <form method="POST" class="mb-4">
    <div class="row">
      <div class="col-md-3">
        <label>Nombre de usuario:</label>
        <input type="text" name="username" class="form-control" required>
      </div>
      <div class="col-md-3">
        <label>Email:</label>
        <input type="email" name="email" class="form-control" required>
      </div>
      <div class="col-md-3">
        <label>Contraseña:</label>
        <input type="password" name="password" class="form-control" required>
      </div>
      <div class="col-md-3">
        <label>Rol:</label>
        <select name="rol" class="form-select">
          {% for rol in roles %}
          <option value="{{ rol.irolpk }}">{{ rol.snombre }}</option>
          {% endfor %}
        </select>
      </div>
    </div>

    <div class="row mt-3">
      <div class="col-md-6">
        <label>Bombero asignado:</label>
        <select name="bombero" class="form-select">
          <option value="">-- Seleccionar bombero --</option>
          {% for b in bomberos %}
          <option value="{{ b.ibomberoPK }}">{{ b.nombre_completo }}</option>
          {% endfor %}
        </select>
      </div>
      <div class="col-md-2 mt-4">
        <button type="submit" class="btn btn-primary w-100">Registrar</button>
      </div>
    </div>
  </form>

  <h4>Usuarios registrados</h4>
  <table class="table table-bordered">
    <thead>
      <tr>
        <th>Usuario</th>
        <th>Email</th>
        <th>Rol</th>
        <th>Bombero</th>
        <th>Estado</th>
      </tr>
    </thead>
    <tbody>
      {% for u in usuarios %}
      <tr>
        <td>{{ u.susername }}</td>
        <td>{{ u.semail }}</td>
        <td>{{ u.rol }}</td>
        <td>{{ u.bombero }}</td>
        <td>{{ u.sestado }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
      </div>
    </div>
    {% endblock %}
